// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package openid

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-keycloak/sdk/v5/go/keycloak/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// ## # openid.ClientPermissions
//
// Allows you to manage all openid client Scope Based Permissions.
//
// This is part of a preview keycloak feature. You need to enable this feature to be able to use this resource. More
// information about enabling the preview feature can be found
// here: https://www.keycloak.org/docs/latest/securing_apps/index.html#_token-exchange
//
// When enabling Openid Client Permissions, Keycloak does several things automatically:
//
//  1. Enable Authorization on build-in realm-management client
//  2. Create scopes "view", "manage", "configure", "map-roles", "map-roles-client-scope", "map-roles-composite", "
//     token-exchange"
//  3. Create a resource representing the openid client
//  4. Create all scope based permission for the scopes and openid client resource
//
// If the realm-management Authorization is not enable, you have to ceate a dependency (`dependsOn`) with the policy and
// the openid client.
//
// ### Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-keycloak/sdk/v5/go/keycloak"
//	"github.com/pulumi/pulumi-keycloak/sdk/v5/go/keycloak/openid"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			realm, err := keycloak.NewRealm(ctx, "realm", &keycloak.RealmArgs{
//				Realm: pulumi.String("realm"),
//			})
//			if err != nil {
//				return err
//			}
//			myOpenidClient, err := openid.NewClient(ctx, "myOpenidClient", &openid.ClientArgs{
//				RealmId:             realm.ID(),
//				ClientId:            pulumi.String("my_openid_client"),
//				ClientSecret:        pulumi.String("secret"),
//				AccessType:          pulumi.String("CONFIDENTIAL"),
//				StandardFlowEnabled: pulumi.Bool(true),
//				ValidRedirectUris: pulumi.StringArray{
//					pulumi.String("http://localhost:8080/*"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			realmManagement := openid.LookupClientOutput(ctx, openid.GetClientOutputArgs{
//				RealmId:  realm.ID(),
//				ClientId: pulumi.String("realm-management"),
//			}, nil)
//			testUser, err := keycloak.NewUser(ctx, "testUser", &keycloak.UserArgs{
//				RealmId:   realm.ID(),
//				Username:  pulumi.String("test-user"),
//				Email:     pulumi.String("test-user@fakedomain.com"),
//				FirstName: pulumi.String("Testy"),
//				LastName:  pulumi.String("Tester"),
//			})
//			if err != nil {
//				return err
//			}
//			testClientUserPolicy, err := openid.NewClientUserPolicy(ctx, "testClientUserPolicy", &openid.ClientUserPolicyArgs{
//				ResourceServerId: realmManagement.ApplyT(func(realmManagement openid.GetClientResult) (*string, error) {
//					return &realmManagement.Id, nil
//				}).(pulumi.StringPtrOutput),
//				RealmId: realm.ID(),
//				Users: pulumi.StringArray{
//					testUser.ID(),
//				},
//				Logic:            pulumi.String("POSITIVE"),
//				DecisionStrategy: pulumi.String("UNANIMOUS"),
//			}, pulumi.DependsOn([]pulumi.Resource{
//				myOpenidClient,
//			}))
//			if err != nil {
//				return err
//			}
//			_, err = openid.NewClientPermissions(ctx, "myPermission", &openid.ClientPermissionsArgs{
//				RealmId:  realm.ID(),
//				ClientId: myOpenidClient.ID(),
//				ViewScope: &openid.ClientPermissionsViewScopeArgs{
//					Policies: pulumi.StringArray{
//						testClientUserPolicy.ID(),
//					},
//					Description:      pulumi.String("my description"),
//					DecisionStrategy: pulumi.String("UNANIMOUS"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### Argument Reference
//
// The following arguments are supported:
//
// - `realmId` - (Required) The realm this group exists in.
// - `clientId` - (Required) The id of the client that provides the role.
//
// #### Permission Scopes
//
// Permission scopes can be defined using the following attributes:
//
// - `viewScope`
// - `manageScope`
// - `configureScope`
// - `mapRolesScope`
// - `mapRolesClientScopeScope`
// - `mapRolesCompositeScope`
// - `tokenExchangeScope`
//
// Each of these attributes have the following schema:
//
// - `policies` - (Optional) A list of policy IDs
// - `description` - (Optional) A description for the permission scope
// - `decisionStrategy` - (Optional) The decision strategy, can be one of `UNANIMOUS`, `AFFIRMATIVE`, or `CONSENSUS`.
//
// ### Attributes Reference
//
// In addition to the arguments listed above, the following computed attributes are exported:
//
//   - `authorizationResourceServerId` - Resource server id representing the realm management client on which this
//     permission is managed.
type ClientPermissions struct {
	pulumi.CustomResourceState

	// Resource server id representing the realm management client on which this permission is managed
	AuthorizationResourceServerId pulumi.StringOutput                                `pulumi:"authorizationResourceServerId"`
	ClientId                      pulumi.StringOutput                                `pulumi:"clientId"`
	ConfigureScope                ClientPermissionsConfigureScopePtrOutput           `pulumi:"configureScope"`
	Enabled                       pulumi.BoolOutput                                  `pulumi:"enabled"`
	ManageScope                   ClientPermissionsManageScopePtrOutput              `pulumi:"manageScope"`
	MapRolesClientScopeScope      ClientPermissionsMapRolesClientScopeScopePtrOutput `pulumi:"mapRolesClientScopeScope"`
	MapRolesCompositeScope        ClientPermissionsMapRolesCompositeScopePtrOutput   `pulumi:"mapRolesCompositeScope"`
	MapRolesScope                 ClientPermissionsMapRolesScopePtrOutput            `pulumi:"mapRolesScope"`
	RealmId                       pulumi.StringOutput                                `pulumi:"realmId"`
	TokenExchangeScope            ClientPermissionsTokenExchangeScopePtrOutput       `pulumi:"tokenExchangeScope"`
	ViewScope                     ClientPermissionsViewScopePtrOutput                `pulumi:"viewScope"`
}

// NewClientPermissions registers a new resource with the given unique name, arguments, and options.
func NewClientPermissions(ctx *pulumi.Context,
	name string, args *ClientPermissionsArgs, opts ...pulumi.ResourceOption) (*ClientPermissions, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.ClientId == nil {
		return nil, errors.New("invalid value for required argument 'ClientId'")
	}
	if args.RealmId == nil {
		return nil, errors.New("invalid value for required argument 'RealmId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource ClientPermissions
	err := ctx.RegisterResource("keycloak:openid/clientPermissions:ClientPermissions", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetClientPermissions gets an existing ClientPermissions resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetClientPermissions(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ClientPermissionsState, opts ...pulumi.ResourceOption) (*ClientPermissions, error) {
	var resource ClientPermissions
	err := ctx.ReadResource("keycloak:openid/clientPermissions:ClientPermissions", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ClientPermissions resources.
type clientPermissionsState struct {
	// Resource server id representing the realm management client on which this permission is managed
	AuthorizationResourceServerId *string                                    `pulumi:"authorizationResourceServerId"`
	ClientId                      *string                                    `pulumi:"clientId"`
	ConfigureScope                *ClientPermissionsConfigureScope           `pulumi:"configureScope"`
	Enabled                       *bool                                      `pulumi:"enabled"`
	ManageScope                   *ClientPermissionsManageScope              `pulumi:"manageScope"`
	MapRolesClientScopeScope      *ClientPermissionsMapRolesClientScopeScope `pulumi:"mapRolesClientScopeScope"`
	MapRolesCompositeScope        *ClientPermissionsMapRolesCompositeScope   `pulumi:"mapRolesCompositeScope"`
	MapRolesScope                 *ClientPermissionsMapRolesScope            `pulumi:"mapRolesScope"`
	RealmId                       *string                                    `pulumi:"realmId"`
	TokenExchangeScope            *ClientPermissionsTokenExchangeScope       `pulumi:"tokenExchangeScope"`
	ViewScope                     *ClientPermissionsViewScope                `pulumi:"viewScope"`
}

type ClientPermissionsState struct {
	// Resource server id representing the realm management client on which this permission is managed
	AuthorizationResourceServerId pulumi.StringPtrInput
	ClientId                      pulumi.StringPtrInput
	ConfigureScope                ClientPermissionsConfigureScopePtrInput
	Enabled                       pulumi.BoolPtrInput
	ManageScope                   ClientPermissionsManageScopePtrInput
	MapRolesClientScopeScope      ClientPermissionsMapRolesClientScopeScopePtrInput
	MapRolesCompositeScope        ClientPermissionsMapRolesCompositeScopePtrInput
	MapRolesScope                 ClientPermissionsMapRolesScopePtrInput
	RealmId                       pulumi.StringPtrInput
	TokenExchangeScope            ClientPermissionsTokenExchangeScopePtrInput
	ViewScope                     ClientPermissionsViewScopePtrInput
}

func (ClientPermissionsState) ElementType() reflect.Type {
	return reflect.TypeOf((*clientPermissionsState)(nil)).Elem()
}

type clientPermissionsArgs struct {
	ClientId                 string                                     `pulumi:"clientId"`
	ConfigureScope           *ClientPermissionsConfigureScope           `pulumi:"configureScope"`
	ManageScope              *ClientPermissionsManageScope              `pulumi:"manageScope"`
	MapRolesClientScopeScope *ClientPermissionsMapRolesClientScopeScope `pulumi:"mapRolesClientScopeScope"`
	MapRolesCompositeScope   *ClientPermissionsMapRolesCompositeScope   `pulumi:"mapRolesCompositeScope"`
	MapRolesScope            *ClientPermissionsMapRolesScope            `pulumi:"mapRolesScope"`
	RealmId                  string                                     `pulumi:"realmId"`
	TokenExchangeScope       *ClientPermissionsTokenExchangeScope       `pulumi:"tokenExchangeScope"`
	ViewScope                *ClientPermissionsViewScope                `pulumi:"viewScope"`
}

// The set of arguments for constructing a ClientPermissions resource.
type ClientPermissionsArgs struct {
	ClientId                 pulumi.StringInput
	ConfigureScope           ClientPermissionsConfigureScopePtrInput
	ManageScope              ClientPermissionsManageScopePtrInput
	MapRolesClientScopeScope ClientPermissionsMapRolesClientScopeScopePtrInput
	MapRolesCompositeScope   ClientPermissionsMapRolesCompositeScopePtrInput
	MapRolesScope            ClientPermissionsMapRolesScopePtrInput
	RealmId                  pulumi.StringInput
	TokenExchangeScope       ClientPermissionsTokenExchangeScopePtrInput
	ViewScope                ClientPermissionsViewScopePtrInput
}

func (ClientPermissionsArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*clientPermissionsArgs)(nil)).Elem()
}

type ClientPermissionsInput interface {
	pulumi.Input

	ToClientPermissionsOutput() ClientPermissionsOutput
	ToClientPermissionsOutputWithContext(ctx context.Context) ClientPermissionsOutput
}

func (*ClientPermissions) ElementType() reflect.Type {
	return reflect.TypeOf((**ClientPermissions)(nil)).Elem()
}

func (i *ClientPermissions) ToClientPermissionsOutput() ClientPermissionsOutput {
	return i.ToClientPermissionsOutputWithContext(context.Background())
}

func (i *ClientPermissions) ToClientPermissionsOutputWithContext(ctx context.Context) ClientPermissionsOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ClientPermissionsOutput)
}

// ClientPermissionsArrayInput is an input type that accepts ClientPermissionsArray and ClientPermissionsArrayOutput values.
// You can construct a concrete instance of `ClientPermissionsArrayInput` via:
//
//	ClientPermissionsArray{ ClientPermissionsArgs{...} }
type ClientPermissionsArrayInput interface {
	pulumi.Input

	ToClientPermissionsArrayOutput() ClientPermissionsArrayOutput
	ToClientPermissionsArrayOutputWithContext(context.Context) ClientPermissionsArrayOutput
}

type ClientPermissionsArray []ClientPermissionsInput

func (ClientPermissionsArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ClientPermissions)(nil)).Elem()
}

func (i ClientPermissionsArray) ToClientPermissionsArrayOutput() ClientPermissionsArrayOutput {
	return i.ToClientPermissionsArrayOutputWithContext(context.Background())
}

func (i ClientPermissionsArray) ToClientPermissionsArrayOutputWithContext(ctx context.Context) ClientPermissionsArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ClientPermissionsArrayOutput)
}

// ClientPermissionsMapInput is an input type that accepts ClientPermissionsMap and ClientPermissionsMapOutput values.
// You can construct a concrete instance of `ClientPermissionsMapInput` via:
//
//	ClientPermissionsMap{ "key": ClientPermissionsArgs{...} }
type ClientPermissionsMapInput interface {
	pulumi.Input

	ToClientPermissionsMapOutput() ClientPermissionsMapOutput
	ToClientPermissionsMapOutputWithContext(context.Context) ClientPermissionsMapOutput
}

type ClientPermissionsMap map[string]ClientPermissionsInput

func (ClientPermissionsMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ClientPermissions)(nil)).Elem()
}

func (i ClientPermissionsMap) ToClientPermissionsMapOutput() ClientPermissionsMapOutput {
	return i.ToClientPermissionsMapOutputWithContext(context.Background())
}

func (i ClientPermissionsMap) ToClientPermissionsMapOutputWithContext(ctx context.Context) ClientPermissionsMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ClientPermissionsMapOutput)
}

type ClientPermissionsOutput struct{ *pulumi.OutputState }

func (ClientPermissionsOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**ClientPermissions)(nil)).Elem()
}

func (o ClientPermissionsOutput) ToClientPermissionsOutput() ClientPermissionsOutput {
	return o
}

func (o ClientPermissionsOutput) ToClientPermissionsOutputWithContext(ctx context.Context) ClientPermissionsOutput {
	return o
}

// Resource server id representing the realm management client on which this permission is managed
func (o ClientPermissionsOutput) AuthorizationResourceServerId() pulumi.StringOutput {
	return o.ApplyT(func(v *ClientPermissions) pulumi.StringOutput { return v.AuthorizationResourceServerId }).(pulumi.StringOutput)
}

func (o ClientPermissionsOutput) ClientId() pulumi.StringOutput {
	return o.ApplyT(func(v *ClientPermissions) pulumi.StringOutput { return v.ClientId }).(pulumi.StringOutput)
}

func (o ClientPermissionsOutput) ConfigureScope() ClientPermissionsConfigureScopePtrOutput {
	return o.ApplyT(func(v *ClientPermissions) ClientPermissionsConfigureScopePtrOutput { return v.ConfigureScope }).(ClientPermissionsConfigureScopePtrOutput)
}

func (o ClientPermissionsOutput) Enabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *ClientPermissions) pulumi.BoolOutput { return v.Enabled }).(pulumi.BoolOutput)
}

func (o ClientPermissionsOutput) ManageScope() ClientPermissionsManageScopePtrOutput {
	return o.ApplyT(func(v *ClientPermissions) ClientPermissionsManageScopePtrOutput { return v.ManageScope }).(ClientPermissionsManageScopePtrOutput)
}

func (o ClientPermissionsOutput) MapRolesClientScopeScope() ClientPermissionsMapRolesClientScopeScopePtrOutput {
	return o.ApplyT(func(v *ClientPermissions) ClientPermissionsMapRolesClientScopeScopePtrOutput {
		return v.MapRolesClientScopeScope
	}).(ClientPermissionsMapRolesClientScopeScopePtrOutput)
}

func (o ClientPermissionsOutput) MapRolesCompositeScope() ClientPermissionsMapRolesCompositeScopePtrOutput {
	return o.ApplyT(func(v *ClientPermissions) ClientPermissionsMapRolesCompositeScopePtrOutput {
		return v.MapRolesCompositeScope
	}).(ClientPermissionsMapRolesCompositeScopePtrOutput)
}

func (o ClientPermissionsOutput) MapRolesScope() ClientPermissionsMapRolesScopePtrOutput {
	return o.ApplyT(func(v *ClientPermissions) ClientPermissionsMapRolesScopePtrOutput { return v.MapRolesScope }).(ClientPermissionsMapRolesScopePtrOutput)
}

func (o ClientPermissionsOutput) RealmId() pulumi.StringOutput {
	return o.ApplyT(func(v *ClientPermissions) pulumi.StringOutput { return v.RealmId }).(pulumi.StringOutput)
}

func (o ClientPermissionsOutput) TokenExchangeScope() ClientPermissionsTokenExchangeScopePtrOutput {
	return o.ApplyT(func(v *ClientPermissions) ClientPermissionsTokenExchangeScopePtrOutput { return v.TokenExchangeScope }).(ClientPermissionsTokenExchangeScopePtrOutput)
}

func (o ClientPermissionsOutput) ViewScope() ClientPermissionsViewScopePtrOutput {
	return o.ApplyT(func(v *ClientPermissions) ClientPermissionsViewScopePtrOutput { return v.ViewScope }).(ClientPermissionsViewScopePtrOutput)
}

type ClientPermissionsArrayOutput struct{ *pulumi.OutputState }

func (ClientPermissionsArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ClientPermissions)(nil)).Elem()
}

func (o ClientPermissionsArrayOutput) ToClientPermissionsArrayOutput() ClientPermissionsArrayOutput {
	return o
}

func (o ClientPermissionsArrayOutput) ToClientPermissionsArrayOutputWithContext(ctx context.Context) ClientPermissionsArrayOutput {
	return o
}

func (o ClientPermissionsArrayOutput) Index(i pulumi.IntInput) ClientPermissionsOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *ClientPermissions {
		return vs[0].([]*ClientPermissions)[vs[1].(int)]
	}).(ClientPermissionsOutput)
}

type ClientPermissionsMapOutput struct{ *pulumi.OutputState }

func (ClientPermissionsMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ClientPermissions)(nil)).Elem()
}

func (o ClientPermissionsMapOutput) ToClientPermissionsMapOutput() ClientPermissionsMapOutput {
	return o
}

func (o ClientPermissionsMapOutput) ToClientPermissionsMapOutputWithContext(ctx context.Context) ClientPermissionsMapOutput {
	return o
}

func (o ClientPermissionsMapOutput) MapIndex(k pulumi.StringInput) ClientPermissionsOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *ClientPermissions {
		return vs[0].(map[string]*ClientPermissions)[vs[1].(string)]
	}).(ClientPermissionsOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ClientPermissionsInput)(nil)).Elem(), &ClientPermissions{})
	pulumi.RegisterInputType(reflect.TypeOf((*ClientPermissionsArrayInput)(nil)).Elem(), ClientPermissionsArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*ClientPermissionsMapInput)(nil)).Elem(), ClientPermissionsMap{})
	pulumi.RegisterOutputType(ClientPermissionsOutput{})
	pulumi.RegisterOutputType(ClientPermissionsArrayOutput{})
	pulumi.RegisterOutputType(ClientPermissionsMapOutput{})
}
