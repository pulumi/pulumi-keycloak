// *** WARNING: this file was generated by pulumi-language-java. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package com.pulumi.keycloak;

import com.pulumi.core.Output;
import com.pulumi.core.annotations.Export;
import com.pulumi.core.annotations.ResourceType;
import com.pulumi.core.internal.Codegen;
import com.pulumi.keycloak.KubernetesIdentityProviderArgs;
import com.pulumi.keycloak.Utilities;
import com.pulumi.keycloak.inputs.KubernetesIdentityProviderState;
import java.lang.Boolean;
import java.lang.String;
import java.util.Map;
import java.util.Optional;
import javax.annotation.Nullable;

/**
 * Allows for creating and managing Kubernetes Identity Providers within Keycloak. Workloads inside a Kubernetes cluster can authenticate using service account tokens.
 * 
 * &gt; **NOTICE:**
 * This is part of a preview keycloak feature. You need to enable this feature to be able to use this resource.
 * More information about enabling the preview feature can be found here: https://www.keycloak.org/docs/latest/server_admin/index.html#_identity_broker_kubernetes
 * 
 * ## Example Usage
 * 
 * ### With An OpenID Client
 * 
 * ### With A Kubernetes Workload Authentication
 * 
 * ### Keycloak configuration
 * 
 * ### Kubernetes workload
 * 
 * In your Kubernetes workload, you need to mount a service account token with the right audience pointing to your Keycloak instance
 * 
 * 1. Issuer URL of the Keycloak realm.
 * 2. Maximum time allowed by Kubernetes is 3600 seconds
 * 
 * ### In the Pod, use curl to authenticate to Keycloak:
 * 
 * ### And the response should look something like:
 * 
 * &gt; **NOTICE:**
 * Changing authentication flow bindings in your Realm settings can break existing clients&#39; ability to authenticate, if not configured properly!
 * 
 * ## Import
 * 
 * Identity providers can be imported using the format `{{realm_id}}/{{idp_alias}}`, where `idpAlias` is the identity provider alias.
 * 
 * Example:
 * 
 * ```sh
 * $ pulumi import keycloak:index/kubernetesIdentityProvider:KubernetesIdentityProvider realm_identity_provider my-realm/my-idp
 * ```
 * 
 */
@ResourceType(type="keycloak:index/kubernetesIdentityProvider:KubernetesIdentityProvider")
public class KubernetesIdentityProvider extends com.pulumi.resources.CustomResource {
    /**
     * Enable/disable if new users can read any stored tokens. This assigns the broker.read-token role.
     * 
     */
    @Export(name="addReadTokenRoleOnCreate", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> addReadTokenRoleOnCreate;

    /**
     * @return Enable/disable if new users can read any stored tokens. This assigns the broker.read-token role.
     * 
     */
    public Output<Optional<Boolean>> addReadTokenRoleOnCreate() {
        return Codegen.optional(this.addReadTokenRoleOnCreate);
    }
    /**
     * The alias uniquely identifies an identity provider, and it is also used to build the redirect uri.
     * 
     */
    @Export(name="alias", refs={String.class}, tree="[0]")
    private Output<String> alias;

    /**
     * @return The alias uniquely identifies an identity provider, and it is also used to build the redirect uri.
     * 
     */
    public Output<String> alias() {
        return this.alias;
    }
    /**
     * Enable/disable authenticate users by default.
     * 
     */
    @Export(name="authenticateByDefault", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> authenticateByDefault;

    /**
     * @return Enable/disable authenticate users by default.
     * 
     */
    public Output<Optional<Boolean>> authenticateByDefault() {
        return Codegen.optional(this.authenticateByDefault);
    }
    /**
     * Friendly name for Identity Providers.
     * 
     */
    @Export(name="displayName", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> displayName;

    /**
     * @return Friendly name for Identity Providers.
     * 
     */
    public Output<Optional<String>> displayName() {
        return Codegen.optional(this.displayName);
    }
    /**
     * Enable/disable this identity provider.
     * 
     */
    @Export(name="enabled", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> enabled;

    /**
     * @return Enable/disable this identity provider.
     * 
     */
    public Output<Optional<Boolean>> enabled() {
        return Codegen.optional(this.enabled);
    }
    @Export(name="extraConfig", refs={Map.class,String.class}, tree="[0,1,1]")
    private Output</* @Nullable */ Map<String,String>> extraConfig;

    public Output<Optional<Map<String,String>>> extraConfig() {
        return Codegen.optional(this.extraConfig);
    }
    /**
     * Alias of authentication flow, which is triggered after first login with this identity provider. Term &#39;First Login&#39; means that there is not yet existing Keycloak account linked with the authenticated identity provider account.
     * 
     */
    @Export(name="firstBrokerLoginFlowAlias", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> firstBrokerLoginFlowAlias;

    /**
     * @return Alias of authentication flow, which is triggered after first login with this identity provider. Term &#39;First Login&#39; means that there is not yet existing Keycloak account linked with the authenticated identity provider account.
     * 
     */
    public Output<Optional<String>> firstBrokerLoginFlowAlias() {
        return Codegen.optional(this.firstBrokerLoginFlowAlias);
    }
    /**
     * GUI Order
     * 
     */
    @Export(name="guiOrder", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> guiOrder;

    /**
     * @return GUI Order
     * 
     */
    public Output<Optional<String>> guiOrder() {
        return Codegen.optional(this.guiOrder);
    }
    /**
     * This is always set to true for Kubernetes identity provider.
     * 
     */
    @Export(name="hideOnLoginPage", refs={Boolean.class}, tree="[0]")
    private Output<Boolean> hideOnLoginPage;

    /**
     * @return This is always set to true for Kubernetes identity provider.
     * 
     */
    public Output<Boolean> hideOnLoginPage() {
        return this.hideOnLoginPage;
    }
    /**
     * Internal Identity Provider Id
     * 
     */
    @Export(name="internalId", refs={String.class}, tree="[0]")
    private Output<String> internalId;

    /**
     * @return Internal Identity Provider Id
     * 
     */
    public Output<String> internalId() {
        return this.internalId;
    }
    /**
     * The Kubernetes issuer URL of service account tokens. The URL &lt;ISSUER&gt;/.well-known/openid-configuration must be available to Keycloak.
     * 
     */
    @Export(name="issuer", refs={String.class}, tree="[0]")
    private Output<String> issuer;

    /**
     * @return The Kubernetes issuer URL of service account tokens. The URL &lt;ISSUER&gt;/.well-known/openid-configuration must be available to Keycloak.
     * 
     */
    public Output<String> issuer() {
        return this.issuer;
    }
    /**
     * If true, users cannot log in through this provider.  They can only link to this provider.  This is useful if you don&#39;t want to allow login from the provider, but want to integrate with a provider
     * 
     */
    @Export(name="linkOnly", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> linkOnly;

    /**
     * @return If true, users cannot log in through this provider.  They can only link to this provider.  This is useful if you don&#39;t want to allow login from the provider, but want to integrate with a provider
     * 
     */
    public Output<Optional<Boolean>> linkOnly() {
        return Codegen.optional(this.linkOnly);
    }
    @Export(name="orgDomain", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> orgDomain;

    public Output<Optional<String>> orgDomain() {
        return Codegen.optional(this.orgDomain);
    }
    @Export(name="orgRedirectModeEmailMatches", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> orgRedirectModeEmailMatches;

    public Output<Optional<Boolean>> orgRedirectModeEmailMatches() {
        return Codegen.optional(this.orgRedirectModeEmailMatches);
    }
    /**
     * ID of organization with which this identity is linked.
     * 
     */
    @Export(name="organizationId", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> organizationId;

    /**
     * @return ID of organization with which this identity is linked.
     * 
     */
    public Output<Optional<String>> organizationId() {
        return Codegen.optional(this.organizationId);
    }
    /**
     * Alias of authentication flow, which is triggered after each login with this identity provider. Useful if you want additional verification of each user authenticated with this identity provider (for example OTP). Leave this empty if you don&#39;t want any additional authenticators to be triggered after login with this identity provider. Also note, that authenticator implementations must assume that user is already set in ClientSession as identity provider already set it.
     * 
     */
    @Export(name="postBrokerLoginFlowAlias", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> postBrokerLoginFlowAlias;

    /**
     * @return Alias of authentication flow, which is triggered after each login with this identity provider. Useful if you want additional verification of each user authenticated with this identity provider (for example OTP). Leave this empty if you don&#39;t want any additional authenticators to be triggered after login with this identity provider. Also note, that authenticator implementations must assume that user is already set in ClientSession as identity provider already set it.
     * 
     */
    public Output<Optional<String>> postBrokerLoginFlowAlias() {
        return Codegen.optional(this.postBrokerLoginFlowAlias);
    }
    /**
     * Provider ID, is always kubernetes.
     * 
     */
    @Export(name="providerId", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> providerId;

    /**
     * @return Provider ID, is always kubernetes.
     * 
     */
    public Output<Optional<String>> providerId() {
        return Codegen.optional(this.providerId);
    }
    /**
     * The name of the realm. This is unique across Keycloak.
     * 
     */
    @Export(name="realm", refs={String.class}, tree="[0]")
    private Output<String> realm;

    /**
     * @return The name of the realm. This is unique across Keycloak.
     * 
     */
    public Output<String> realm() {
        return this.realm;
    }
    /**
     * Enable/disable if tokens must be stored after authenticating users.
     * 
     */
    @Export(name="storeToken", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> storeToken;

    /**
     * @return Enable/disable if tokens must be stored after authenticating users.
     * 
     */
    public Output<Optional<Boolean>> storeToken() {
        return Codegen.optional(this.storeToken);
    }
    /**
     * Sync Mode
     * 
     */
    @Export(name="syncMode", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> syncMode;

    /**
     * @return Sync Mode
     * 
     */
    public Output<Optional<String>> syncMode() {
        return Codegen.optional(this.syncMode);
    }
    /**
     * If enabled then email provided by this provider is not verified even if verification is enabled for the realm.
     * 
     */
    @Export(name="trustEmail", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> trustEmail;

    /**
     * @return If enabled then email provided by this provider is not verified even if verification is enabled for the realm.
     * 
     */
    public Output<Optional<Boolean>> trustEmail() {
        return Codegen.optional(this.trustEmail);
    }

    /**
     *
     * @param name The _unique_ name of the resulting resource.
     */
    public KubernetesIdentityProvider(java.lang.String name) {
        this(name, KubernetesIdentityProviderArgs.Empty);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     */
    public KubernetesIdentityProvider(java.lang.String name, KubernetesIdentityProviderArgs args) {
        this(name, args, null);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param options A bag of options that control this resource's behavior.
     */
    public KubernetesIdentityProvider(java.lang.String name, KubernetesIdentityProviderArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("keycloak:index/kubernetesIdentityProvider:KubernetesIdentityProvider", name, makeArgs(args, options), makeResourceOptions(options, Codegen.empty()), false);
    }

    private KubernetesIdentityProvider(java.lang.String name, Output<java.lang.String> id, @Nullable KubernetesIdentityProviderState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("keycloak:index/kubernetesIdentityProvider:KubernetesIdentityProvider", name, state, makeResourceOptions(options, id), false);
    }

    private static KubernetesIdentityProviderArgs makeArgs(KubernetesIdentityProviderArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        if (options != null && options.getUrn().isPresent()) {
            return null;
        }
        return args == null ? KubernetesIdentityProviderArgs.Empty : args;
    }

    private static com.pulumi.resources.CustomResourceOptions makeResourceOptions(@Nullable com.pulumi.resources.CustomResourceOptions options, @Nullable Output<java.lang.String> id) {
        var defaultOptions = com.pulumi.resources.CustomResourceOptions.builder()
            .version(Utilities.getVersion())
            .build();
        return com.pulumi.resources.CustomResourceOptions.merge(defaultOptions, options, id);
    }

    /**
     * Get an existing Host resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state
     * @param options Optional settings to control the behavior of the CustomResource.
     */
    public static KubernetesIdentityProvider get(java.lang.String name, Output<java.lang.String> id, @Nullable KubernetesIdentityProviderState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        return new KubernetesIdentityProvider(name, id, state, options);
    }
}
